@model ProjetoMyTe.AppWeb.Models.DTO.LancamentoHorasDTO
@inject ProjetoMyTe.AppWeb.Services.QuinzenasService quinzenaService
@using ProjetoMyTe.AppWeb.Models.Common;

@{
    ViewData["Title"] = "LancarHorasDTO";
}
<h1 class="mt-5 text-center" style="color:#6b056b;">Lançar Horas</h1>
@{
    var quinzena = quinzenaService.CriarQuinzena();
    var qtdeDias = quinzena.DiasDoMes!.Count;
}
<div class="container mt-3">
    <form id="formAdicionarHoras" asp-action="LancarHorasDTO" class="mt-5">
        <div id="EspacoLancamento" class="d-flex justify-content-center">
            <table class="table table-bordered w-auto" style="font-size:12px;">
                <thead>
                    <tr>
                        <th style="width: 150px;">Selecione a WBS</th>
                        @for (var j = 0; j < qtdeDias; j++)
                        {
                            <th style="width: 80px;">
                                <label class="control-label">@quinzena.GetDia(j).ToString("d/M/yy ddd")</label>
                            </th>
                        }
                    </tr>
                </thead>
                <tbody>

                    @for (var i = 0; i < 8; i++)
                    {

                        <tr>
                            <td>

                                <div class="form-group mb-3" >
                                    <select asp-for="WbsId![i]" asp-items="(SelectList)ViewBag.ListaDeWbss" class="form-select">
                                        <option value="0">WBS</option>
                                    </select>
                                    <span asp-validation-for="WbsId" class="text-danger"></span>
                                </div>
                            </td>




                            @for (var j = 0; j < qtdeDias; j++)
                            {
                                <th >

                                    @if (quinzena.FinaisDeSemana!.Contains(quinzena.GetDia(j)))
                                    {
                                        <input asp-for="Horas" type="number" class="form-control" min="0" max="8" disabled />
                                        <input asp-for="Horas" type="hidden" value="0" class="form-control" />
                                    }
                                    else
                                    {
                                        <input asp-for="Horas" type="number" class="form-control" value="0" min="0" max="8" />
                                    }
                                    <span asp-validation-for="Horas" class="text-danger"></span>

                                </th>
                            }
                        </tr>

                    }
                </tbody>
            </table>
        </div>
        <div class="mt-4">
            <div class="row">
                <div class="col">
                    <input type="submit" value="Lançar horas" class="btn btn-primary" style="background-color: #890078; " />
                </div>
            </div>
            <div class="row mt-2">
                <div class="col">
                    <a asp-action="ListarRegistrosQuinzena" asp-controller="LancamentoHoras" class="btn btn-primary" style="background-color: #890078; ">Listar Último Lançamento</a>
                </div>
            </div>
        </div>
    </form>
</div>

<style>

    .btn {
        border: none;
    }

    .btn-secondary {
        border-radius: 10px;
        border: none;
        background-color: #8c9299;
    }


    .btn-primary {
        background-color: #890078;
        border-radius: 10px;
    }

        .btn-primary:hover {
            background-color: #6b056b;
        }

    table {
        
        text-align: center;
    }

    th, td {
        vertical-align: middle;
    }

</style>
