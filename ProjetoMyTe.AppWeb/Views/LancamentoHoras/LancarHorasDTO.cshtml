@model ProjetoMyTe.AppWeb.Models.DTO.LancamentoHorasDTO
@inject ProjetoMyTe.AppWeb.Services.QuinzenasService quinzenaService
@using ProjetoMyTe.AppWeb.Models.Common;

@{
    ViewData["Title"] = "LancarHorasDTO";
}
<h1 class="mt-5">Lançar Horas</h1>
@{
    var quinzena = quinzenaService.CriarQuinzena();
    var qtdeDias = quinzena.DiasDoMes.Count;
}
<div class="container mt-3">
    <form id="formAdicionarHoras" asp-action="LancarHorasDTO" class="mt-5">
        <div id="EspacoLancamento">

             @for(var i = 0; i < 8; i++)
            {
            <div>
                <tr>
                    <div class="form-group mb-3" >
                    <select asp-for="WbsId[i]" asp-items="(SelectList)ViewBag.ListaDeWbss" class="form-select">
                    <option value="0">SELECIONE A WBS</option>
                    </select>
                    <span asp-validation-for="WbsId" class="text-danger"></span>
                    </div>
                </tr>
                <table class="table table-bordered">
                    <tr>
                        @for(var j = 0; j < qtdeDias; j++)
                        {
                            <th>
                            <label class="control-label">@quinzena.GetDia(j).ToString("d/M/yy   ddd")</label>

                            @if (quinzena.FinaisDeSemana!.Contains(quinzena.GetDia(j)))
                            {
                                <input asp-for="Horas" type="number" class="form-control" min="0" max="8" disabled />
                                <input asp-for="Horas" type="hidden" value="0" class="form-control" />
                            }else
                            {
                                <input asp-for="Horas" type="number" class="form-control" value="0" min="0" max="8" />
                            }
                             <span asp-validation-for="Horas" class="text-danger"></span>

                            </th>
                        }
                    </tr>
                </table>
            </div>
            }
           
                
            <div class="mt-4">
                <div class="row">
                    <div class="col">
                        <input type="submit" value="Lançar horas" class="btn btn-primary" style="background-color: #890078; " />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col">
                        <a asp-action="ListarRegistrosQuinzena" asp-controller="LancamentoHoras" class="btn btn-primary" style="background-color: #890078; ">Listar Último Lançamento</a>
                    </div>
                </div>
            </div>
       
    </form>
</div>

